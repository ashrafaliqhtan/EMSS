{% extends 'invigilation/based.html' %}
{% load static %}
{% load widget_tweaks %}

{% block title %}Create New Lecturer{% endblock %}

{% block extra_css %}
<style>
    .form-container {
        max-width: 800px;
        margin: 0 auto;
    }
    .form-label {
        font-weight: 500;
        margin-bottom: 0.5rem;
    }
    .form-control, .form-select {
        padding: 0.5rem 0.75rem;
        border-radius: 0.375rem;
    }
    .btn-primary {
        padding: 0.5rem 1.5rem;
    }
    .is-invalid {
        border-color: #dc3545;
    }
    .invalid-feedback {
        color: #dc3545;
        font-size: 0.875rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="container mt-4 form-container">
    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h3 class="mb-0">
                <i class="bi bi-person-plus me-2"></i>Create New Lecturer
            </h3>
        </div>
        <div class="card-body">
            <form method="post" class="needs-validation" novalidate>
                {% csrf_token %}
                
                {% if form.errors %}
                <div class="alert alert-danger alert-dismissible fade show mb-4">
                    <strong><i class="bi bi-exclamation-triangle me-2"></i>Form Errors:</strong>
                    Please correct the errors below.
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
                {% endif %}

                <div class="row g-3">
                    <!-- Lecturer Code -->
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.lecturer_code.id_for_label }}" class="form-label">
                                Lecturer Code
                            </label>
                            {% render_field form.lecturer_code class="form-control" placeholder="Enter lecturer code" %}
                            {% if form.lecturer_code.errors %}
                            <div class="invalid-feedback">
                                {{ form.lecturer_code.errors|join:", " }}
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Lecturer Name -->
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.lecturer_name.id_for_label }}" class="form-label">
                                Full Name
                            </label>
                            {% render_field form.lecturer_name class="form-control" placeholder="Enter full name" %}
                            {% if form.lecturer_name.errors %}
                            <div class="invalid-feedback">
                                {{ form.lecturer_name.errors|join:", " }}
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Department -->
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.department.id_for_label }}" class="form-label">
                                Department
                            </label>
                            {% render_field form.department class="form-select" %}
                            {% if form.department.errors %}
                            <div class="invalid-feedback">
                                {{ form.department.errors|join:", " }}
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Lecturer Level -->
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.lecturer_level.id_for_label }}" class="form-label">
                                Level
                            </label>
                            {% render_field form.lecturer_level class="form-select" %}
                            {% if form.lecturer_level.errors %}
                            <div class="invalid-feedback">
                                {{ form.lecturer_level.errors|join:", " }}
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Exam Type -->
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.exam_type.id_for_label }}" class="form-label">
                                Exam Type
                            </label>
                            {% render_field form.exam_type class="form-select" %}
                            {% if form.exam_type.errors %}
                            <div class="invalid-feedback">
                                {{ form.exam_type.errors|join:", " }}
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Invigilation Type -->
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.invigilation_type.id_for_label }}" class="form-label">
                                Invigilation Type
                            </label>
                            {% render_field form.invigilation_type class="form-select" %}
                            {% if form.invigilation_type.errors %}
                            <div class="invalid-feedback">
                                {{ form.invigilation_type.errors|join:", " }}
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Additional fields can be added here following the same pattern -->
                </div>

                <div class="d-flex justify-content-between mt-4 pt-3 border-top">
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-save me-2"></i>Create Lecturer
                    </button>
                    <a href="{% url 'lecturers' %}" class="btn btn-outline-secondary">
                        <i class="bi bi-x-circle me-2"></i>Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Enable Bootstrap form validation
    const forms = document.querySelectorAll('.needs-validation');
    
    Array.from(forms).forEach(function(form) {
        form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        }, false);
    });
});
</script>
{% endblock %}